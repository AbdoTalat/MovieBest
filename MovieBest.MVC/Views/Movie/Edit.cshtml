@model MovieViewModel
@{
	SelectList GenresItems = new SelectList(ViewBag.Genres, "ID", "Name");
}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Planet</title>
	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<link href="/css/font-awesome.min.css" rel="stylesheet">
	<link href="/css/global.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Rajdhani&display=swap" rel="stylesheet">
	<script src="/js/bootstrap.bundle.min.js"></script>

</head>

<body>

	<section id="center" class="center_o pt-2 pb-2">
	<div class="container-xl">
		<div class="row center_o1">
			<div class="col-md-5">
				<div class="center_o1l">
					<h3 class="mb-0">Update Exist Movie</h3>
				</div>
			</div>
		</div>
	</div>
	</section>

	<section id="contact" class="pt-4 pb-4 bg_grey">
		<div class="container-xl">
			<div class="col-md-9">
				

				<form asp-action="Edit" asp-controller="Movie" asp-route-ID="@Model.ID" method="post" enctype="multipart/form-data">
					<div asp-validation-summary="All" class="text-danger"></div>
					<div class="contact_2l1 mt-3 row">
						<div class="col-md-6">
							<label asp-for="Title"></label>
							<div class="contact_2l1i">
								<input class="form-control" value="@Model.Title" asp-for="Title">
								<span asp-validation-for="Title" class="text-danger"></span>
							</div>
						</div>
						<div class="col-md-6">
							<label asp-for="MovieLanguage"></label>
							<div class="contact_2l1i">
								<input class="form-control" placeholder="Language*" asp-for="MovieLanguage">
								<span asp-validation-for="MovieLanguage" class="text-danger"></span>
							</div>
						</div>
					</div>

					<div class="contact_2l1 mt-3 row">
						<div class="col-md-6">
							<label asp-for="Duration"></label>
							<div class="contact_2l1i">
								<input class="form-control" placeholder="Duration*" asp-for="Duration">
								<span asp-validation-for="Duration" class="text-danger"></span>
							</div>
						</div>
						<div class="col-md-6">
							<label asp-for="Rating"></label>
							<div class="contact_2l1i">
								<input class="form-control" placeholder="Rating*" asp-for="Rating">
								<span asp-validation-for="Rating" class="text-danger"></span>
							</div>
						</div>
					</div>

					<div class="contact_2l1 mt-3 row">
						<div class="col-md-6">
							<label asp-for="ReleaseDate"></label>
							<div class="contact_2l1i">
								<input class="form-control" placeholder="Release Date*" asp-for="ReleaseDate">
								<span asp-validation-for="ReleaseDate" class="text-danger"></span>
							</div>
						</div>
						<div class="col-md-6">
							<label asp-for="GenreId">Genres</label>
							<div class="contact_2l1i">
								<select asp-for="GenreId" asp-items="GenresItems" class="form-control" aria-label="Default select example">
									<option value="0" selected> -- Select Genre -- </option>
								</select>

								<span asp-validation-for="GenreId" class="text-danger"></span>
							</div>
						</div>
					</div>

					<div class="contact_2l1 mt-3 row">

						<div class="col-md-6">
							<label asp-for="Image"></label>
							<div class="contact_2l1i">
								<input type="file" asp-for="Image" style="display: none;" accept=".png,.jpg,.jpeg,.webg" id="imageUpload" />
								<img src="@Model.ExistingImageUrl" 
									 style="width:200px;height:150px; cursor:pointer;"
									 onclick="document.getElementById('imageUpload').click();" id="imagePreview" />
								<span asp-validation-for="Video" class="text-danger"></span>
							</div>
						</div>
						<div class="col-md-6">
							<label asp-for="Video">Select New Video If You Want To Change:</label>
                            <div class="contact_2l1i">
                                <input class="form-control" type="file" accept=".mp4,.mov" asp-for="Video">
								<span asp-validation-for="Video" class="text-danger"></span>
							</div>
                        </div>
						

					</div>

					<div class="contact_2l1 mt-3 row">
						<div class="col-md-12">
							<label asp-for="Description"></label>
							<div class="contact_2l1i">
								<textarea placeholder="Description" class="form-control form_text" asp-for="Description"></textarea>
								<span asp-validation-for="Description" class="text-danger"></span>
							</div>
						</div>
					</div>
					<br />
					<button type="submit" class="btn btn-success" style="width:40%"> <b>Submit</b> </button>


				</form>
                <br />
                <a asp-action="Index" asp-controller="Movie" class="btn btn-light" style="width:40%;"><b>Back To List</b> <i class="bi bi-plus"></i></a>

			</div>
			@section Scripts {
				@{
					await Html.RenderPartialAsync("_ValidationScriptsPartial");
				}
			}
			
			<script>
				// Optional: Additional JavaScript validation
				$('form').submit(function (e) {
					var imageInput = $('#Image')[0];
					var videoInput = $('#Video')[0];

					if (imageInput.files.length === 0) {
						e.preventDefault();
						alert("Please select an image file.");
					}

					if (videoInput.files.length === 0) {
						e.preventDefault();
						alert("Please select a video file.");
					}
				});
			</script>
		</div>
	</section>
</body>
</html>